add_gdal_driver(TARGET gdal_GTIFF SOURCES
								cogdriver.cpp
								cogdriver.h
								gtiff.h
								gt_jpeg_copy.h
								gt_citation.h
								gt_overview.h
								gt_wkt_srs.h
								gt_wkt_srs_priv.h
								gt_wkt_srs_for_gdal.h
								tifvsi.h
								tif_float.h
								tif_lerc.h
								geotiff.cpp
								gt_jpeg_copy.cpp
								gt_citation.cpp
								gt_overview.cpp
								gt_wkt_srs.cpp
								tifvsi.cpp
								tif_float.c
								BUILTIN
								)
gdal_standard_includes(gdal_GTIFF)
target_include_directories(gdal_GTIFF PRIVATE $<TARGET_PROPERTY:gdal_JPEG,SOURCE_DIR>)
option(HAVE_LERC "Enable LERC" ON)
if(GDAL_USE_LIBTIFF_INTERNAL)
	target_compile_definitions(gdal_GTIFF PRIVATE -DINTERNAL_LIBTIFF)
	target_include_directories(gdal_GTIFF PRIVATE $<TARGET_PROPERTY:libtiff,SOURCE_DIR>)
    if(RENAME_INTERNAL_LIBTIFF_SYMBOLS)
		target_compile_definitions(gdal_GTIFF PRIVATE -DRENAME_INTERNAL_LIBTIFF_SYMBOLS)
	endif()
	if(HAVE_LERC)
		target_sources(gdal_GTIFF PRIVATE tif_lerc.c)
		target_compile_definitions(gdal_GTIFF PRIVATE -DHAVE_LERC)
		target_include_directories(gdal_GTIFF PRIVATE $<TARGET_PROPERTY:lerc,SOURCE_DIR>)
	endif()
else()
	target_compile_definitions(gdal_GTIFF PRIVATE -DHAVE_TIFF -DBIGTIFF_SUPPORT -DPIXARLOG_SUPPORT)
	gdal_target_link_libraries(TARGET gdal_GTIFF LIBRARIES TIFF::TIFF)
endif()

if(GDAL_USE_LIBJPEG_INTERNAL)
	target_include_directories(gdal_GTIFF PRIVATE $<TARGET_PROPERTY:libjpeg,SOURCE_DIR>)
	target_compile_definitions(gdal_GTIFF PRIVATE -DHAVE_LIBJPEG)
else()
	target_compile_definitions(gdal_GTIFF PRIVATE -DHAVE_LIBJPEG)
	gdal_target_link_libraries(TARGET gdal_GTIFF LIBRARIES JPEG::JPEG)
endif()

if(GDAL_USE_LIBGEOTIFF_INTERNAL)
    target_include_directories(gdal_GTIFF PRIVATE $<TARGET_PROPERTY:geotiff,SOURCE_DIR>)
    target_compile_definitions(gdal_GTIFF PRIVATE -DINTERNAL_LIBGEOTIFF)
    if(RENAME_INTERNAL_LIBGEOTIFF_SYMBOLS)
        target_compile_definitions(gdal_GITFF PRIVATE -DRENAME_INTERNAL_LIBGEOTIFF_SYMBOLS)
    endif()
else()
    gdal_target_link_libraries(TARGET gdal_GTIFF LIBRARIES ${GEOTIFF_LIBRARY})
endif()

if(GDAL_USE_LIBZ_INTERNAL)
    target_include_directories(gdal_GTIFF PRIVATE $<TARGET_PROPERTY:libz,SOURCE_DIR>)
else()
    gdal_target_link_libraries(TARGET gdal_GTIFF LIBRARIES ZLIB::ZLIB)
endif()

if(HAVE_WEBP)
    target_compile_definitions(gdal_GTIFF PRIVATE -DWEBP_SUPPORT)
    gdal_target_link_libraries(TARGET gdal_GTIFF LIBRARIES WEBP::WebP)
endif()

if(HAVE_ZSTD)
    target_compile_definitions(gdal_GTIFF PRIVATE -DZSTD_SUPPORT)
    gdal_target_link_libraries(TARGET gdal_GTIFF LIBRARIES ${ZSTD_LIBRARIES})
endif()

gdal_target_link_libraries(TARGET gdal_GTIFF LIBRARIES PROJ::PROJ)
